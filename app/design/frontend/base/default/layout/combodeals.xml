<?xml version="1.0"?>
<layout>
    <catalog_product_view>
        <reference name="content">
            <block type="combodeals/combodeals" name="product.info.combodeals" as="combodeals" template="combodeals/combodeals.phtml"/>
        </reference>
    </catalog_product_view>
    
    <!--
        Shopping cart item renderer
    -->
    <checkout_cart_index>
        <reference name="checkout.cart">
            <action method="addItemRender"><type>combodeal</type><block>combodeals/checkout_cart_item_renderer</block><template>combodeals/checkout/cart/item/default.phtml</template></action>
        </reference>    
    </checkout_cart_index>
    
    <!--
        Onepage Checkout Review Page
    -->
    <checkout_onepage_review>
        <reference name="root">
            <action method="addItemRender"><type>combodeal</type><block>combodeals/checkout_cart_item_renderer</block><template>combodeals/checkout/onepage/review/item.phtml</template></action>
        </reference>
    </checkout_onepage_review>

    <checkout_multishipping_addresses>
        <reference name="checkout_addresses">
            <action method="addItemRender"><type>combodeal</type><block>combodeals/checkout_cart_item_renderer</block><template>combodeals/checkout/multishipping/item/default.phtml</template></action>
        </reference>
    </checkout_multishipping_addresses>

    <checkout_multishipping_shipping>
        <reference name="checkout_shipping">
            <action method="addItemRender"><type>combodeal</type><block>combodeals/checkout_cart_item_renderer</block><template>combodeals/checkout/multishipping/item/default.phtml</template></action>
        </reference>
        <reference name="checkout_billing_items">
            <action method="addItemRender"><type>combodeal</type><block>combodeals/checkout_cart_item_renderer</block><template>combodeals/checkout/multishipping/item/default.phtml</template></action>
        </reference>
    </checkout_multishipping_shipping>

    <checkout_multishipping_overview>
        <reference name="checkout_overview">
            <action method="addItemRender"><type>combodeal</type><block>combodeals/checkout_cart_item_renderer</block><template>combodeals/checkout/multishipping/item/default.phtml</template></action>
        </reference>
    </checkout_multishipping_overview>

    <paypal_express_review>
        <reference name="paypal.express.review.details">
            <action method="addItemRender"><type>combodeal</type><block>combodeals/checkout_cart_item_renderer</block><template>combodeals/checkout/onepage/review/item.phtml</template></action>
        </reference>
    </paypal_express_review>
    <paypal_express_review_details>
        <reference name="root">
            <action method="addItemRender"><type>combodeal</type><block>combodeals/checkout_cart_item_renderer</block><template>combodeals/checkout/onepage/review/item.phtml</template></action>
        </reference>
    </paypal_express_review_details>

    <paypaluk_express_review>
        <reference name="paypal.express.review.details">
            <action method="addItemRender"><type>combodeal</type><block>combodeals/checkout_cart_item_renderer</block><template>combodeals/checkout/onepage/review/item.phtml</template></action>
        </reference>
    </paypaluk_express_review>
    <paypaluk_express_review_details>
        <reference name="root">
            <action method="addItemRender"><type>combodeal</type><block>combodeals/checkout_cart_item_renderer</block><template>combodeals/checkout/onepage/review/item.phtml</template></action>
        </reference>
    </paypaluk_express_review_details>
    
    <!--
        Additional block for bundle product type
    -->    
    <sales_order_view>
        <reference name="order_items">
            <action method="addItemRender"><type>combodeal</type><block>combodeals/sales_order_items_renderer</block><template>bundle/sales/order/items/renderer.phtml</template></action>
        </reference>
    </sales_order_view>

    <sales_order_invoice>
        <reference name="invoice_items">
            <action method="addItemRender"><type>combodeal</type><block>combodeals/sales_order_items_renderer</block><template>bundle/sales/order/invoice/items/renderer.phtml</template></action>
        </reference>
    </sales_order_invoice>

    <sales_order_shipment>
        <reference name="shipment_items">
            <action method="addItemRender"><type>combodeal</type><block>combodeals/sales_order_items_renderer</block><template>bundle/sales/order/shipment/items/renderer.phtml</template></action>
        </reference>
    </sales_order_shipment>

    <sales_order_creditmemo>
        <reference name="creditmemo_items">
            <action method="addItemRender"><type>combodeal</type><block>combodeals/sales_order_items_renderer</block><template>bundle/sales/order/creditmemo/items/renderer.phtml</template></action>
        </reference>
    </sales_order_creditmemo>
</layout>
